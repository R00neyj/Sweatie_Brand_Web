<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <!-- font urbanist -->
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
      <!-- font dm serif -->
      <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet" />
      <!-- aos animation -->
      <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

      <!-- css -->
      <link href="../css/normalize.css" rel="stylesheet" />
      <link href="../css/won.css" rel="stylesheet" />
   </head>
   <body>
      <!-- <div class="header" style="height: 10dvh; background-color: aquamarine; position: fixed; top: 0; left: 0; right: 0; z-index: 999"></div> -->
      <div id="smooth-wrapper">
         <div id="smooth-content">
            <div class="blank" style="height: 100dvh"></div>
            <section class="section sec-2">
               <div class="content-wrap">
                  <div class="section-header">
                     <h2>Highlight</h2>
                  </div>
                  <div class="scroll-ani">
                     <div class="card card-1">
                        <div class="img-box"><img src="/image/section2/sec-2-1.webp" alt="section-2 image Run with Mate" /></div>
                        <div class="text-box">
                           <h3>Run with Mate</h3>
                           <p>나와 딱 맞는 러닝 메이트를 찾아보세요</p>
                        </div>
                     </div>
                     <div class="card card-2">
                        <div class="img-box"><img src="/image/section2/sec-2-2.jpg" alt="section-2 image Rewords" /></div>
                        <div class="text-box">
                           <h3>Rewords</h3>
                           <p>기록을 넘어선 도전, 짜릿한 경쟁과 풍성한 보상</p>
                        </div>
                     </div>
                     <div class="card card-3">
                        <div class="img-box"><img src="/image/section2/sec-2-3.webp" alt="section-2 image Record&Analize" /></div>
                        <div class="text-box">
                           <h3>Record&Analize</h3>
                           <p>나의 러닝 데이터를 완벽하게 분석하고 성장하세요.</p>
                        </div>
                     </div>
                     <div class="card card-4">
                        <div class="img-box"><img src="/image/section2/sec-2-4.webp" alt="section-2 image Community" /></div>
                        <div class="text-box">
                           <h3>Community</h3>
                           <p>러닝의 즐거움을 함께 나누는 공간.</p>
                        </div>
                     </div>
                  </div>
               </div>
            </section>
            <div class="blank" style="height: 100dvh"></div>
         </div>
      </div>

      <!-- aos animation -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
      <!-- gsap -->
      <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
      <!-- gsap svg -->
      <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/DrawSVGPlugin.min.js"></script>
      <!-- gsap scrollsmoother -->
      <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollSmoother.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
      <script>
         gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

         function highlightAni__init() {
            const cardBox = document.querySelector(".sec-2 .scroll-ani");
            const scrollPause = cardBox.querySelector(".scrollPause");
            const cards = cardBox.querySelectorAll(".card");

            // cards.forEach((el) => {
            //    gsap.to(scrollPause, {
            //       scrollTrigger: {
            //          trigger: el,
            //          scrub: true,
            //          markers: true,
            //          onEnter: () => {
            //             cards.forEach((el) => {
            //                el.classList.remove("active");
            //             });
            //             el.classList.add("active");
            //             ScrollTrigger.refresh();
            //          },
            //       },
            //       x: 1000,
            //       duration: 10,
            //    });
            // });

            const HighlightObserver = new IntersectionObserver(
               function (entries) {
                  entries.forEach((entry) => {
                     let isIntersecting = entry.isIntersecting;
                     if (isIntersecting) {
                        cards.forEach((el) => {
                           el.classList.remove("active");
                        });
                        entry.target.classList.add("active");
                     }
                  });
               },
               {
                  root: null,
                  threshold: 0.75,
               }
            );

            cards.forEach((el) => {
               HighlightObserver.observe(el);
            });

            cards.forEach((card) => {
               card.addEventListener("click", (e) => {
                  cards.forEach((el) => {
                     el.classList.remove("active");
                  });
                  card.classList.add("active");

                  let Yaxis;
                  let delay;
                  clearTimeout(delay);
                  let delayTime = 600;
                  delay = setTimeout(() => {
                     Yaxis = card.offsetTop;
                     console.log(card, Yaxis);
                     window.scrollTo({
                        top: Yaxis,
                        behavior: "smooth",
                     });
                  }, delayTime);
               });
            });
         }

         highlightAni__init();
         ScrollSmoother.create({
            smooth: 1,
            effects: true,
         });
      </script>
   </body>
</html>
